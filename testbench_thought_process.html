<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Getting Started: Verilog Testbench Thought Process</title>
    <style>
        * {
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #0a192f 100%);
            color: #e0e0e0;
            margin: 0;
            padding: 12px;
            height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        h1 {
            margin: 0;
            text-align: center;
            color: #4fc3f7;
            font-size: 1.4em;
        }

        .subtitle {
            text-align: center;
            color: #90a4ae;
            margin: 2px 0 10px 0;
            font-size: 0.95em;
        }

        .layout {
            display: grid;
            grid-template-columns: 1.2fr 1.6fr 1.2fr;
            gap: 12px;
            flex: 1;
            min-height: 0;
        }

        .panel {
            background: #0d1b2a;
            border: 1px solid #546e7a;
            border-radius: 12px;
            padding: 12px;
            display: flex;
            flex-direction: column;
            min-height: 0;
        }

        .panel-title {
            font-weight: 700;
            color: #cfd8dc;
            margin-bottom: 8px;
        }

        .steps {
            display: flex;
            flex-direction: column;
            gap: 8px;
            overflow-y: auto;
        }

        .step-card {
            border: 1px solid #546e7a;
            border-radius: 10px;
            padding: 10px;
            background: rgba(84, 110, 122, 0.12);
            cursor: pointer;
            transition: all 0.15s ease;
        }

        .step-card:hover {
            border-color: #4fc3f7;
        }

        .step-num {
            font-weight: 800;
            color: #ffb74d;
            margin-right: 6px;
        }

        pre {
            background: #0a1524;
            border: 1px solid #37474f;
            border-radius: 10px;
            padding: 12px;
            margin: 0;
            overflow: auto;
            color: #c5cae9;
            flex: 1;
            font-size: 0.95em;
            line-height: 1.35;
        }

        .code-line {
            display: block;
        }

        .line-num {
            display: inline-block;
            width: 36px;
            color: #546e7a;
            user-select: none;
        }

        .desc {
            color: #e0e0e0;
            font-size: 0.95em;
            line-height: 1.4;
            margin-bottom: 8px;
        }

        .bullets {
            margin: 0;
            padding-left: 18px;
            color: #cfd8dc;
            font-size: 0.95em;
            line-height: 1.35;
        }

        .controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        button {
            background: #1a237e;
            color: #fff;
            border: 1px solid #5c6bc0;
            border-radius: 8px;
            padding: 10px 12px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.15s ease;
            box-shadow: 0 0 8px rgba(79, 195, 247, 0.2);
        }

        button:hover {
            border-color: #4fc3f7;
            transform: translateY(-1px);
        }

        button:active {
            transform: scale(0.98);
        }

        .status {
            font-family: 'Courier New', monospace;
            color: #cfd8dc;
            margin-top: 6px;
            font-size: 0.95em;
        }
    </style>
</head>

<body>
    <div>
        <h1>Getting Started: Testbench Thought Process</h1>
        <div class="subtitle">Beginner-friendly checklist—click through the steps to see what to add next.</div>
    </div>

    <div class="layout">
        <div class="panel">
            <div class="panel-title">Steps</div>
            <div class="steps" id="stepList"></div>
        </div>

        <div class="panel">
            <div class="panel-title">Highlighted testbench code</div>
            <pre id="codeBlock"></pre>
            <div class="controls">
                <button id="prevBtn">Previous</button>
                <button id="nextBtn">Next</button>
            </div>
            <div class="status" id="statusText"></div>
        </div>

        <div class="panel">
            <div class="panel-title">Why this step matters</div>
            <div class="desc" id="desc"></div>
            <ul class="bullets" id="bullets"></ul>
            <div class="panel-title" style="margin-top:12px;">More advanced features (later)</div>
            <div class="desc" id="advancedDesc"></div>
        </div>
    </div>

    <script>
        const steps = [
            {
                title: '1) Create a testbench module',
                desc: 'A testbench has no ports—it owns the DUT signals internally.',
                bullets: [
                    'Keeps the testbench self-contained.',
                    'Allows you to drive DUT signals without external wiring.'
                ],
                advanced: 'Later: use interfaces and packages to share typedefs and clocking across benches.',
                highlight: [1, 2]
            },
            {
                title: '2) Declare driving regs and observing wires',
                desc: 'Inputs to the DUT are regs you control; outputs are wires you observe.',
                bullets: [
                    'Match DUT port widths and names.',
                    'Use regs for anything you assign in procedural blocks.'
                ],
                advanced: 'Later: switch to SystemVerilog logic/types and use interfaces to bundle related ports.',
                highlight: [4, 5, 6, 7]
            },
            {
                title: '3) Instantiate the DUT',
                desc: 'Place the design under test inside the bench and hook up ports.',
                bullets: [
                    'Use named port connections to avoid ordering mistakes.',
                    'Keep DUT instance name obvious (e.g., dut).'
                ],
                advanced: 'Later: parameterize instantiations and bind assertions/monitors without modifying the DUT.',
                highlight: [9, 10, 11, 12, 13, 14, 15, 16]
            },
            {
                title: '4) Generate a clock (if sequential)',
                desc: 'A free-running clock drives sequential logic; keep the period realistic.',
                bullets: [
                    'Initialize clk before the toggling always block.',
                    'Adjust #delay for desired period or duty cycle.'
                ],
                advanced: 'Later: add reset sequencing, multiple clocks, derived clocks, and clocking blocks.',
                highlight: [18, 19, 20]
            },
            {
                title: '5) Drive inputs (initial block)',
                desc: 'Script stimulus: reset, apply vectors, wait for edges, repeat.',
                bullets: [
                    'Use #delays or @(posedge clk) to align with clocked logic.',
                    'Keep vectors readable; add comments for intent.'
                ],
                advanced: 'Later: move to event-driven sequences, reusable tasks, constrained-random stimulus, and phase-based control.',
                highlight: [22, 23, 24, 25, 26, 27, 28, 29]
            },
            {
                title: '6) Observe / self-check',
                desc: 'Print or assert expected behavior; make the bench fail loudly.',
                bullets: [
                    'Use $display/$monitor for quick visibility.',
                    'Add if-checks and stop on mismatches.'
                ],
                advanced: 'Later: add scoreboards, assertions, coverage, and pass/fail summaries for regressions.',
                highlight: [31, 32, 33, 34, 35, 36]
            },
            {
                title: '7) Finish cleanly',
                desc: 'End the run once stimuli complete; don’t let simulations hang.',
                bullets: [
                    'Call $finish after your last check.',
                    'Consider $stop for interactive debug.'
                ],
                advanced: 'Later: add timeouts, end-of-test summaries, and hooks for regression infrastructure.',
                highlight: [27, 28, 29]
            }
        ];

        const codeLines = [
            "module alu_tb;",                      // 1
            "  // no ports on a testbench",        // 2
            "                                       ",
            "  reg        clk;",                    // 4
            "  reg  [7:0] a, b;",                  // 5
            "  wire [7:0] sum;",                   // 6
            "  wire       carry;",                 // 7
            "                                       ",
            "  // DUT instantiation",              // 9
            "  alu dut (",                         // 10
            "    .clk  (clk),",                    // 11
            "    .a    (a),",                      // 12
            "    .b    (b),",                      // 13
            "    .sum  (sum),",                    // 14
            "    .carry(carry)",                   // 15
            "  );",                                // 16
            "                                       ",
            "  // Clock: 100 MHz (10 ns period)",  // 18
            "  initial clk = 0;",                  // 19
            "  always #5 clk = ~clk;",             // 20
            "                                       ",
            "  initial begin",                     // 22
            "    a = 8'h00; b = 8'h01;",           // 23
            "    #10 a = 8'h0A; b = 8'h05;",       // 24
            "    #10 a = 8'hFF; b = 8'h01;",       // 25
            "    #10 a = 8'h10; b = 8'hF0;",       // 26
            "    #20 $display(\"Done\");",         // 27
            "    #5  $finish;",                    // 28
            "  end",                               // 29
            "                                       ",
            "  // Simple self-check on one vector",// 31
            "  always @(posedge clk) begin",       // 32
            "    if ({carry,sum} !== (a + b)) begin", // 33
            "      $display(\"[FAIL] %t a=%h b=%h sum=%h carry=%b\", $time, a, b, sum, carry);", // 34
            "    end",                             // 35
            "  end",                               // 36
            "endmodule"                            // 37
        ];

        const stepListEl = document.getElementById('stepList');
        const codeBlock = document.getElementById('codeBlock');
        const descEl = document.getElementById('desc');
        const bulletsEl = document.getElementById('bullets');
        const statusText = document.getElementById('statusText');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const advancedDescEl = document.getElementById('advancedDesc');

        let currentStep = 0;
        const stepColors = [
            { bg: 'rgba(79,195,247,0.14)', border: '#4fc3f7' },
            { bg: 'rgba(255,183,77,0.18)', border: '#ffb74d' },
            { bg: 'rgba(126,87,194,0.16)', border: '#7e57c2' },
            { bg: 'rgba(76,175,80,0.16)', border: '#4caf50' },
            { bg: 'rgba(255,138,101,0.16)', border: '#ff8a65' },
            { bg: 'rgba(144,202,249,0.16)', border: '#90caf9' },
            { bg: 'rgba(255,241,118,0.16)', border: '#fff176' }
        ];

        function renderSteps() {
            stepListEl.innerHTML = '';
            steps.forEach((step, idx) => {
                const card = document.createElement('div');
                card.className = 'step-card' + (idx === currentStep ? ' active' : '');
                const color = stepColors[idx % stepColors.length];
                card.style.borderColor = color.border;
                card.style.background = idx === currentStep ? color.bg : 'rgba(84,110,122,0.12)';
                card.addEventListener('click', () => {
                    currentStep = idx;
                    updateView();
                });
                const title = document.createElement('div');
                title.innerHTML = `<span class="step-num">${idx + 1}.</span>${step.title}`;
                card.appendChild(title);
                stepListEl.appendChild(card);
            });
        }

        function renderCode() {
            codeBlock.innerHTML = '';
            codeLines.forEach((line, idx) => {
                const div = document.createElement('div');
                div.className = 'code-line';
                if (steps[currentStep].highlight.includes(idx + 1)) {
                    const color = stepColors[currentStep % stepColors.length];
                    div.style.background = color.bg;
                    div.style.borderLeft = `3px solid ${color.border}`;
                }
                const num = document.createElement('span');
                num.className = 'line-num';
                num.textContent = String(idx + 1).padStart(2, ' ') + ' ';
                div.appendChild(num);

                const codeSpan = document.createElement('span');
                codeSpan.textContent = line;
                div.appendChild(codeSpan);
                codeBlock.appendChild(div);
            });
        }

        function renderDesc() {
            const step = steps[currentStep];
            descEl.textContent = step.desc;
            const color = stepColors[currentStep % stepColors.length];
            descEl.style.background = color.bg;
            descEl.style.borderLeft = `3px solid ${color.border}`;
            bulletsEl.innerHTML = '';
            step.bullets.forEach(b => {
                const li = document.createElement('li');
                li.textContent = b;
                bulletsEl.appendChild(li);
            });
            advancedDescEl.textContent = step.advanced || '';
            advancedDescEl.style.background = color.bg;
            advancedDescEl.style.borderLeft = `3px solid ${color.border}`;
            statusText.textContent = `Step ${currentStep + 1} of ${steps.length}`;
        }

        function validateData() {
            const errors = [];
            const maxLine = codeLines.length;
            steps.forEach((step, idx) => {
                step.highlight.forEach(h => {
                    if (h < 1 || h > maxLine) {
                        errors.push(`Step ${idx + 1} highlight references line ${h} (out of ${maxLine}).`);
                    }
                });
            });
            return errors;
        }

        function updateView() {
            renderSteps();
            renderCode();
            renderDesc();
            const errs = validateData();
            if (errs.length) {
                statusText.textContent = `Step ${currentStep + 1} of ${steps.length} | Data issues: ${errs.join(' ')}`;
                statusText.style.color = '#ffb74d';
            } else {
                statusText.style.color = '#cfd8dc';
            }
        }

        prevBtn.addEventListener('click', () => {
            currentStep = (currentStep - 1 + steps.length) % steps.length;
            updateView();
        });

        nextBtn.addEventListener('click', () => {
            currentStep = (currentStep + 1) % steps.length;
            updateView();
        });

        updateView();
    </script>
</body>

</html>
